@startuml
title Secuencia de un Turno - java.Catan Mejorado

actor java.Jugador
participant "java.Catan" as C
participant "java.Dados" as D
participant "java.Tablero" as T
participant "Banco" as B
participant "ServicioConstruccion" as SC
participant "ServicioComercio" as SCom
participant "ServicioCartas" as SCar

== Inicio del Turno ==
java.Jugador -> C : iniciarTurno()
C -> D : lanzar()
D --> C : valorDado

alt valorDado != 7
    C -> T : obtenerHexagonosConNumero(valorDado)
    T --> C : listaHex
    C -> B : entregarRecursos(listaHex)
else valorDado == 7
    C -> T : moverLadron()
    T --> C : ladronMovido
    C -> java.Jugador : descartarRecursos()
end

== Fase de java.Comercio ==
java.Jugador -> SCom : comerciar(con, ofrecer, pedir)
SCom --> java.Jugador : resultado

== Fase de Construcción ==
java.Jugador -> SC : construirPoblado(vertice)
SC --> java.Jugador : éxito/fallo
java.Jugador -> SC : construirCiudad(vertice)
SC --> java.Jugador : éxito/fallo
java.Jugador -> SC : construirCamino(arista)
SC --> java.Jugador : éxito/fallo

== Fase de Cartas de Desarrollo ==
java.Jugador -> SCar : jugarCarta(carta)
SCar --> java.Jugador : efecto

== Fin del Turno ==
java.Jugador -> C : terminarTurno()
C -> C : pasarAlSiguienteJugador()
@enduml
